const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Export2Excel-ofprALJd.js","./index-Dpah9Y0-.js","./index-BfXC0mqM.css"])))=>i.map(i=>d[i]);
import{T as L,C as P,d as j,b as E,e as H,w as M,r as u,f,U as O,g as R,i as k,k as l,H as w,m as r,I as $,l as c,n as A,j as F,t as y,s as x,S as J}from"./index-Dpah9Y0-.js";import{_ as Q,M as U,t as z}from"./common-DKgXSvSS.js";function G(i){return L.getRequest("/stock/list",{params:i})}async function K(i){return await G(i)}const{t}=P.global,W=()=>{const i=[{key:"area-1",label:t("area")+"-1"},{key:"area-2",label:t("area")+"-2"},{key:"area-3",label:t("area")+"-3"},{key:"area-4",label:t("area")+"-4"}],s=[{type:"input",placeholder:t("stock.title"),name:"title",styles:{width:"200px"},event:"search"},{type:"select",placeholder:t("area"),name:"area",styles:{width:"150px"},options:i},{type:"select",placeholder:t("stock.sort"),name:"sort",styles:{width:"150px"},options:[{label:t("ascending"),key:"+id"},{label:t("descending"),key:"-id"}]},{type:"button",name:t("button.search"),buttonType:"primary",icon:"search",styles:{margin:"0 10px 0 0"},event:"search"},{type:"button",name:t("button.export"),buttonType:"primary",icon:"download",styles:{margin:"0 10px 0 0"},event:"export"}];return{area:i,header:s}},X={class:"app-container"},Y={class:"link-type"},te=j({__name:"index",setup(i){const{t:s}=E(),{header:D}=W(),C=(e,n)=>{n==="search"?(Object.assign(a,{...a,...e}),m()):n==="export"&&S()},a=H({page:1,limit:20,productionName:void 0,area:void 0,sort:"+id"});M(a,()=>m(),{deep:!0});const m=()=>{a.page=1,h()},p=u(null),_=u(0),g=u(!1),h=async()=>{g.value=!0;const e=await K(a);p.value=e.data.items,_.value=e.data.total,setTimeout(()=>{g.value=!1},1*1e3)},I=({prop:e,order:n})=>{e==="id"&&N(n)},N=e=>{e==="ascending"?a.sort="+id":a.sort="-id",m()},B=function(e){return a.sort===`+${e}`?"ascending":"descending"},v=u(!1),S=z(function(){v.value=!0,J(()=>import("./Export2Excel-ofprALJd.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(e=>{const n=["productionID","productionName","specs","quantity","unit"],b=T(["productionID","productionName","specs","quantity","unit"]);e.export_json_to_excel({header:n,data:b,filename:"stock"}),v.value=!1})},5*1e3),T=e=>{if(p.value)return p.value.map(n=>e.map(o=>n[o]))};return h(),(e,n)=>{const o=f("el-table-column"),b=f("el-tag"),V=f("el-table"),q=O("loading");return k(),R("div",X,[l(Q,{"config-data":r(D),onButtonClick:C},null,8,["config-data"]),w(l(U,{total:_.value,page:a.page,limit:a.limit,onPagination:h},{table:c(()=>[w((k(),A(V,{data:p.value,border:"",fit:"","highlight-current-row":"",style:{width:"100%"},onSortChange:I},{default:c(()=>[l(o,{label:"#",prop:"id",sortable:"custom",align:"center",width:"80","class-name":B("id")},null,8,["class-name"]),l(o,{label:r(s)("stock.productionID"),prop:"productionID","min-width":"200px",align:"center"},null,8,["label"]),l(o,{label:r(s)("stock.productionName"),"min-width":"200px"},{default:c(({row:d})=>[F("span",Y,y(d.productionName),1)]),_:1},8,["label"]),l(o,{label:r(s)("stock.specs"),"min-width":"80px",align:"center"},{default:c(({row:d})=>[x(y(d.specs)+"mm ",1)]),_:1},8,["label"]),l(o,{label:r(s)("stock.quantity"),"min-width":"80px",align:"center",prop:"quantity"},null,8,["label"]),l(o,{label:r(s)("stock.unit"),"min-width":"80px",align:"center",prop:"unit"},null,8,["label"]),l(o,{align:"center",label:r(s)("area"),"min-width":"70px"},{default:c(({row:d})=>[l(b,null,{default:c(()=>[x(y(d.area),1)]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])),[[q,g.value]])]),_:1},8,["total","page","limit"]),[[$,_.value>0]])])}}});export{te as default};
