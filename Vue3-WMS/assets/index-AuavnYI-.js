import{d as E,u as G,a as J,b as K,e as N,r as L,f as c,g as U,i as y,j as m,k as e,t as _,m as o,l as t,J as w,K as O,n as P,s as V,C as I,Q,_ as T}from"./index-Dpah9Y0-.js";import{u as h,d as H,e as W,a as X}from"./useMap-DkwO-FJq.js";import{o as Y}from"./array-DnnSqurD.js";const Z={class:"createPost-container"},ee={class:"title"},le={class:"createPost-main-container"},te={class:"postInfo-container"},ae={class:"title"},oe={class:"specs"},ne={class:"submit_order_button"},re=E({__name:"index",setup(de){const q=G(),v=J(),{t:r}=K(),{area:$,typeMap:F}=h(),f=(s,a)=>I.global.t(`orders.${s}`)+" "+I.global.t(`${a}`),B=N({area:[{required:!0,message:f("area","require"),trigger:"change"}],type:[{required:!0,message:f("type","require"),trigger:"blur"}],client:[{required:!0,message:f("client","require"),trigger:"blur"}],contact:[{required:!0,message:f("contact","require"),trigger:"blur"}],number:[{required:!0,message:f("number","require"),trigger:"blur"}],documenter:[{required:!0,message:f("documenter","require"),trigger:"blur"}]}),x=L(),n=N({orderID:"",type:0,area:"",client:"",contact:"",number:0,title:"",documenter:"",remark:"",timestamp:"",production:[{productionID:"",productionName:"",quantity:0,price:0,specs1:"",specs2:""}]}),R=s=>{s&&s.validate(async a=>{if(!a)return;(q.query.id?await H(n):await W(n)).code===2e4&&(Q({title:"Success",message:I.global.t("tips.submit")+I.global.t("tips.success"),type:"success",duration:2e3}),v.go(-1))})},j=()=>{n.production.length>=5||n.production.push({productionID:"",productionName:"",quantity:0,price:0,specs1:"",specs2:""})},z=s=>{n.production.splice(s,1)},M=async()=>{const s=await X(+q.query.id);s.code===2e4&&Object.assign(n,s.data)};return q.query.id&&M(),(s,a)=>{const d=c("el-input"),i=c("el-form-item"),p=c("el-col"),D=c("el-option"),C=c("el-select"),g=c("el-row"),k=c("el-button"),b=c("el-table-column"),S=c("el-table"),A=c("el-form");return y(),U("div",Z,[m("div",ee,[m("span",null,_(o(q).query.id?o(r)("orders.update"):o(r)("orders.create")),1)]),e(A,{ref_key:"orderFormRef",ref:x,model:n,rules:B,class:"form-container"},{default:t(()=>[m("div",le,[e(g,null,{default:t(()=>[e(p,{span:24},{default:t(()=>[m("div",te,[e(g,null,{default:t(()=>[e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("orders.orderID")+" :",class:"postInfo-container-item",prop:"orderID"},{default:t(()=>[e(d,{modelValue:n.orderID,"onUpdate:modelValue":a[0]||(a[0]=l=>n.orderID=l),placeholder:o(r)("AutoGeneration")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("orders.type")+" :",class:"postInfo-container-item",prop:"type"},{default:t(()=>[e(C,{modelValue:n.type,"onUpdate:modelValue":a[1]||(a[1]=l=>n.type=l),placeholder:""},{default:t(()=>[(y(!0),U(w,null,O(o(Y)(o(F)),l=>(y(),P(D,{key:l.key,label:l.label,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("area")+" :",class:"postInfo-container-item",prop:"area"},{default:t(()=>[e(C,{modelValue:n.area,"onUpdate:modelValue":a[2]||(a[2]=l=>n.area=l),placeholder:""},{default:t(()=>[(y(!0),U(w,null,O(o($),l=>(y(),P(D,{key:l.key,label:l.label,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("orders.client")+" :",class:"postInfo-container-item",prop:"client"},{default:t(()=>[e(d,{modelValue:n.client,"onUpdate:modelValue":a[3]||(a[3]=l=>n.client=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("orders.contact")+" :",class:"postInfo-container-item",prop:"contact"},{default:t(()=>[e(d,{modelValue:n.contact,"onUpdate:modelValue":a[4]||(a[4]=l=>n.contact=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("orders.number")+" :",class:"postInfo-container-item",prop:"number"},{default:t(()=>[e(d,{modelValue:n.number,"onUpdate:modelValue":a[5]||(a[5]=l=>n.number=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("orders.title")+" :",class:"postInfo-container-item",prop:"title"},{default:t(()=>[e(d,{modelValue:n.title,"onUpdate:modelValue":a[6]||(a[6]=l=>n.title=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(r)("orders.documenter")+" :",class:"postInfo-container-item",prop:"documenter"},{default:t(()=>[e(d,{modelValue:n.documenter,"onUpdate:modelValue":a[7]||(a[7]=l=>n.documenter=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(p,{span:20},{default:t(()=>[e(i,{label:o(r)("orders.remark")+":",prop:"remark"},{default:t(()=>[e(d,{modelValue:n.remark,"onUpdate:modelValue":a[8]||(a[8]=l=>n.remark=l),rows:4,type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})]),_:1})]),m("div",ae,[m("span",null,_(o(r)("orders.inboundProduction")),1),e(k,{type:"success",onClick:a[9]||(a[9]=l=>j())},{default:t(()=>[V(_(o(r)("button.createProduction")),1)]),_:1})]),e(i,{prop:"production"},{default:t(()=>[e(S,{data:n.production,border:"",fit:"","header-cell-class-name":"table_header",class:"production"},{default:t(()=>[e(b,{"min-width":"100px",label:o(r)("orders.productionID"),align:"center"},{default:t(({row:l})=>[e(d,{modelValue:l.productionID,"onUpdate:modelValue":u=>l.productionID=u},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(b,{"min-width":"100px",label:o(r)("orders.productionName"),align:"center"},{default:t(({row:l})=>[e(d,{modelValue:l.productionName,"onUpdate:modelValue":u=>l.productionName=u},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(b,{"min-width":"150px",label:o(r)("orders.specs"),align:"center"},{default:t(({row:l})=>[m("div",oe,[e(d,{modelValue:l.specs1,"onUpdate:modelValue":u=>l.specs1=u},null,8,["modelValue","onUpdate:modelValue"]),a[12]||(a[12]=V(" Ã— ")),e(d,{modelValue:l.specs2,"onUpdate:modelValue":u=>l.specs2=u},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),e(b,{"min-width":"80px",label:o(r)("orders.price"),align:"center"},{default:t(({row:l})=>[e(d,{modelValue:l.price,"onUpdate:modelValue":u=>l.price=u},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(b,{"min-width":"80px",label:o(r)("orders.quantity"),align:"center"},{default:t(({row:l})=>[e(d,{modelValue:l.quantity,"onUpdate:modelValue":u=>l.quantity=u},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(b,{"min-width":"90px",label:o(r)("orders.total"),align:"center"},{default:t(({row:l})=>[V(_((l.price*l.quantity).toFixed(2)),1)]),_:1},8,["label"]),e(b,{label:o(r)("orders.actions"),align:"center","min-width":"50","class-name":"small-padding fixed-width"},{default:t(({row:l,$index:u})=>[e(k,{type:"danger",size:"small",onClick:ue=>z(u)},{default:t(()=>[V(_(o(r)("button.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1}),m("div",ne,[e(k,{type:"primary",size:"large",onClick:a[10]||(a[10]=l=>R(x.value))},{default:t(()=>[V(_(o(r)("button.submit")),1)]),_:1}),e(k,{size:"large",onClick:a[11]||(a[11]=l=>o(v).go(-1))},{default:t(()=>[V(_(o(r)("button.cancel")),1)]),_:1})])]),_:1},8,["model","rules"])])}}}),ce=T(re,[["__scopeId","data-v-eb20b717"]]);export{ce as default};
