import{d as E,u as G,a as J,b as K,e as N,r as L,f as m,g as U,i as y,j as c,k as e,t as b,m as o,l as t,J as w,K as P,n as $,s as V,C as k,Q,_ as T}from"./index-Dpah9Y0-.js";import{u as h}from"./useMap-Citu0Jbo.js";import{o as H}from"./array-DnnSqurD.js";import{u as W,d as X,a as Y}from"./service-DYs_S7I-.js";const Z={class:"createPost-container"},ee={class:"title"},le={class:"createPost-main-container"},te={class:"postInfo-container"},ae={class:"title"},oe={class:"specs"},re={class:"submit_order_button"},ne=E({__name:"index",setup(ue){const I=G(),v=J(),{t:n}=K(),{area:F,typeMap:B}=h(),_=(s,a)=>k.global.t(`orders.${s}`)+" "+k.global.t(`${a}`),O=N({area:[{required:!0,message:_("area","require"),trigger:"change"}],type:[{required:!0,message:_("type","require"),trigger:"blur"}],supplier:[{required:!0,message:_("supplier","require"),trigger:"blur"}],contact:[{required:!0,message:_("contact","require"),trigger:"blur"}],number:[{required:!0,message:_("number","require"),trigger:"blur"}],documenter:[{required:!0,message:_("documenter","require"),trigger:"blur"}]}),x=L(),r=N({orderID:"",type:0,area:"",supplier:"",contact:"",number:0,title:"",documenter:"",remark:"",timestamp:"",production:[{productionID:"",productionName:"",quantity:0,price:0,specs1:"",specs2:""}]}),R=s=>{s&&s.validate(async a=>{if(!a)return;(I.query.id?await W(r):await X(r)).code===2e4&&(Q({title:"Success",message:k.global.t("tips.submit")+k.global.t("tips.success"),type:"success",duration:2e3}),v.go(-1))})},j=()=>{r.production.length>=5||r.production.push({productionID:"",productionName:"",quantity:0,price:0,specs1:"",specs2:""})},z=s=>{r.production.splice(s,1)},M=async()=>{const s=await Y(+I.query.id);s.code===2e4&&Object.assign(r,s.data)};return I.query.id&&M(),(s,a)=>{const u=m("el-input"),i=m("el-form-item"),p=m("el-col"),D=m("el-option"),C=m("el-select"),g=m("el-row"),q=m("el-button"),f=m("el-table-column"),S=m("el-table"),A=m("el-form");return y(),U("div",Z,[c("div",ee,[c("span",null,b(o(I).query.id?o(n)("orders.update"):o(n)("orders.create")),1)]),e(A,{ref_key:"orderFormRef",ref:x,model:r,rules:O,class:"form-container"},{default:t(()=>[c("div",le,[e(g,null,{default:t(()=>[e(p,{span:24},{default:t(()=>[c("div",te,[e(g,null,{default:t(()=>[e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("orders.orderID")+" :",class:"postInfo-container-item",prop:"orderID"},{default:t(()=>[e(u,{modelValue:r.orderID,"onUpdate:modelValue":a[0]||(a[0]=l=>r.orderID=l),placeholder:o(n)("AutoGeneration")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("orders.type")+" :",class:"postInfo-container-item",prop:"type"},{default:t(()=>[e(C,{modelValue:r.type,"onUpdate:modelValue":a[1]||(a[1]=l=>r.type=l),placeholder:""},{default:t(()=>[(y(!0),U(w,null,P(o(H)(o(B)),l=>(y(),$(D,{key:l.key,label:l.label,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("area")+" :",class:"postInfo-container-item",prop:"area"},{default:t(()=>[e(C,{modelValue:r.area,"onUpdate:modelValue":a[2]||(a[2]=l=>r.area=l),placeholder:""},{default:t(()=>[(y(!0),U(w,null,P(o(F),l=>(y(),$(D,{key:l.key,label:l.label,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("orders.supplier")+" :",class:"postInfo-container-item",prop:"supplier"},{default:t(()=>[e(u,{modelValue:r.supplier,"onUpdate:modelValue":a[3]||(a[3]=l=>r.supplier=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("orders.contact")+" :",class:"postInfo-container-item",prop:"contact"},{default:t(()=>[e(u,{modelValue:r.contact,"onUpdate:modelValue":a[4]||(a[4]=l=>r.contact=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("orders.number")+" :",class:"postInfo-container-item",prop:"number"},{default:t(()=>[e(u,{modelValue:r.number,"onUpdate:modelValue":a[5]||(a[5]=l=>r.number=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("orders.title")+" :",class:"postInfo-container-item",prop:"title"},{default:t(()=>[e(u,{modelValue:r.title,"onUpdate:modelValue":a[6]||(a[6]=l=>r.title=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(p,{span:8},{default:t(()=>[e(i,{label:o(n)("orders.documenter")+" :",class:"postInfo-container-item",prop:"documenter"},{default:t(()=>[e(u,{modelValue:r.documenter,"onUpdate:modelValue":a[7]||(a[7]=l=>r.documenter=l)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(p,{span:20},{default:t(()=>[e(i,{label:o(n)("orders.remark")+":",prop:"remark"},{default:t(()=>[e(u,{modelValue:r.remark,"onUpdate:modelValue":a[8]||(a[8]=l=>r.remark=l),rows:4,type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})]),_:1})]),c("div",ae,[c("span",null,b(o(n)("orders.inboundProduction")),1),e(q,{type:"success",onClick:a[9]||(a[9]=l=>j())},{default:t(()=>[V(b(o(n)("button.createProduction")),1)]),_:1})]),e(i,{prop:"production"},{default:t(()=>[e(S,{data:r.production,border:"",fit:"","header-cell-class-name":"table_header",class:"production"},{default:t(()=>[e(f,{"min-width":"100px",label:o(n)("orders.productionID"),align:"center"},{default:t(({row:l})=>[e(u,{modelValue:l.productionID,"onUpdate:modelValue":d=>l.productionID=d},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(f,{"min-width":"100px",label:o(n)("orders.productionName"),align:"center"},{default:t(({row:l})=>[e(u,{modelValue:l.productionName,"onUpdate:modelValue":d=>l.productionName=d},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(f,{"min-width":"150px",label:o(n)("orders.specs"),align:"center"},{default:t(({row:l})=>[c("div",oe,[e(u,{modelValue:l.specs1,"onUpdate:modelValue":d=>l.specs1=d},null,8,["modelValue","onUpdate:modelValue"]),a[12]||(a[12]=V(" Ã— ")),e(u,{modelValue:l.specs2,"onUpdate:modelValue":d=>l.specs2=d},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),e(f,{"min-width":"80px",label:o(n)("orders.price"),align:"center"},{default:t(({row:l})=>[e(u,{modelValue:l.price,"onUpdate:modelValue":d=>l.price=d},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(f,{"min-width":"80px",label:o(n)("orders.quantity"),align:"center"},{default:t(({row:l})=>[e(u,{modelValue:l.quantity,"onUpdate:modelValue":d=>l.quantity=d},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),e(f,{"min-width":"90px",label:o(n)("orders.total"),align:"center"},{default:t(({row:l})=>[V(b((l.price*l.quantity).toFixed(2)),1)]),_:1},8,["label"]),e(f,{label:o(n)("orders.actions"),align:"center","min-width":"50","class-name":"small-padding fixed-width"},{default:t(({row:l,$index:d})=>[e(q,{type:"danger",size:"small",onClick:de=>z(d)},{default:t(()=>[V(b(o(n)("button.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1}),c("div",re,[e(q,{type:"primary",size:"large",onClick:a[10]||(a[10]=l=>R(x.value))},{default:t(()=>[V(b(o(n)("button.submit")),1)]),_:1}),e(q,{size:"large",onClick:a[11]||(a[11]=l=>o(v).go(-1))},{default:t(()=>[V(b(o(n)("button.cancel")),1)]),_:1})])]),_:1},8,["model","rules"])])}}}),ce=T(ne,[["__scopeId","data-v-30488ef4"]]);export{ce as default};
