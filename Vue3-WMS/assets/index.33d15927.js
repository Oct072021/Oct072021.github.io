import{P as S,E,B as k,d as M,b as R,e as H,w as J,r as p,k as f,X as O,n as w,f as $,g as s,j as r,J as x,K as j,i as c,q as A,m as F,t as y,x as D,V as K,R as Q}from"./index.a0fe722d.js";import{_ as X,M as z,t as G}from"./common.cfed7fdf.js";function U(i){return S.getRequest("/vue-element-admin/stock/list",{params:i})}async function W(i){return await U(i)}const{t:n}=E.global,Y=()=>{const i=k(()=>[{key:"area-1",label:n("area")+"-1"},{key:"area-2",label:n("area")+"-2"},{key:"area-3",label:n("area")+"-3"},{key:"area-4",label:n("area")+"-4"}]),l=k(()=>[{type:"input",placeholder:n("stock.title"),name:"title",styles:{width:"200px"},event:"search"},{type:"select",placeholder:n("area"),name:"area",styles:{width:"150px"},options:i.value},{type:"select",placeholder:n("stock.sort"),name:"sort",styles:{width:"150px"},options:[{label:n("ascending"),key:"+id"},{label:n("descending"),key:"-id"}]},{type:"button",name:n("button.search"),buttonType:"primary",icon:"search",styles:{margin:"0 10px 0 0"},event:"search"},{type:"button",name:n("button.export"),buttonType:"primary",icon:"download",styles:{margin:"0 10px 0 0"},event:"export"}]);return{area:i,header:l}},Z={class:"app-container"},ee={class:"link-type"},oe=M({__name:"index",setup(i){const{t:l}=R(),{header:C,area:te}=Y(),N=(e,a)=>{a==="search"?(Object.assign(o,{...o,...e}),m()):a==="export"&&q()},o=H({page:1,limit:20,productionName:void 0,area:void 0,sort:"+id"});J(o,()=>m(),{deep:!0});const m=()=>{o.page=1,h()},d=p(null),_=p(0),g=p(!1),h=async()=>{g.value=!0;const e=await W(o);d.value=e.data.items,_.value=e.data.total,setTimeout(()=>{g.value=!1},1*1e3)},B=({prop:e,order:a})=>{e==="id"&&I(a)},I=e=>{e==="ascending"?o.sort="+id":o.sort="-id",m()},V=function(e){return o.sort===`+${e}`?"ascending":"descending"},v=p(!1),q=G(function(){v.value=!0,K(()=>import("./Export2Excel.4f109762.js"),["./Export2Excel.4f109762.js","./index.a0fe722d.js","./index.d2546d49.css"],import.meta.url).then(e=>{const a=["productionID","productionName","specs","quantity","unit"],b=T(["productionID","productionName","specs","quantity","unit"]);e.export_json_to_excel({header:a,data:b,filename:"stock"}),v.value=!1})},5*1e3),T=e=>{if(!!d.value)return d.value.map(a=>e.map(t=>t==="timestamp"?Q(a[t]):a[t]))};return h(),(e,a)=>{const t=f("el-table-column"),b=f("el-tag"),L=f("el-table"),P=O("loading");return w(),$("div",Z,[s(X,{"config-data":r(C),onButtonClick:N},null,8,["config-data"]),x(s(z,{total:_.value,page:o.page,limit:o.limit,onPagination:h},{table:c(()=>[x((w(),A(L,{data:d.value,border:"",fit:"","highlight-current-row":"",style:{width:"100%"},onSortChange:B},{default:c(()=>[s(t,{label:"#",prop:"id",sortable:"custom",align:"center",width:"80","class-name":V("id")},null,8,["class-name"]),s(t,{label:r(l)("stock.productionID"),prop:"productionID","min-width":"200px",align:"center"},null,8,["label"]),s(t,{label:r(l)("stock.productionName"),"min-width":"200px"},{default:c(({row:u})=>[F("span",ee,y(u.productionName),1)]),_:1},8,["label"]),s(t,{label:r(l)("stock.specs"),"min-width":"80px",align:"center"},{default:c(({row:u})=>[D(y(u.specs)+"mm ",1)]),_:1},8,["label"]),s(t,{label:r(l)("stock.quantity"),"min-width":"80px",align:"center",prop:"quantity"},null,8,["label"]),s(t,{label:r(l)("stock.unit"),"min-width":"80px",align:"center",prop:"unit"},null,8,["label"]),s(t,{align:"center",label:r(l)("area"),"min-width":"70px"},{default:c(({row:u})=>[s(b,null,{default:c(()=>[D(y(u.area),1)]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])),[[P,g.value]])]),_:1},8,["total","page","limit"]),[[j,_.value>0]])])}}});export{oe as default};
